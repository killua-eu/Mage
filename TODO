TODO 110104
- dodelat /var/lib/mage/profile/* soubory, separovat konfiguraci a funkci
- kouknout na installkernel (target make install kernelu)

OLD TODO
funkce parsujici bash konfiguraky s nejakymi chytrymi metodami, napr.
app: append value do existujici promenne, nebo promennou vytvor
pre: prepend value do existujici promenne, nebo promennou vytvor
set: prepis existujici nebo vytvor novou promennou
cut: z existujici promenne odeber
del: smaz celou deklaraaci promenne.

app,pre s nepovinnym parametrem: vloz jen pokud to v dane promenne uz neni
pozor! nunty prohlidnout co je opravdu platne!

x="a"
x="b"
x="${x} c"
da "b c" a proti tomuto by se to melo kontrolovat!

dalsi problem: soucre prikaz v bashi.

nevim jestli by se to nezralo s .append metodami u arrayu takze jsem si neco vymyslel
pokud mas lepsi napad jak to rozdelit, sem s nim.


LINGUAS="en"
make = bashconf.parser()
make.app('LINGUAS','en',1) ->   LINGUAS="en"
make.app('LINGUAS','en')   ->   LINGUAS="en en"
make.app('LINGUAS','de')   ->   LINGUAS="en de"
make.cut('LINGUAS','de')   ->   LINGUAS="en"
make.pre('LINGUAS','de')   ->   LINGUAS="de en"
make.set('LINGUAS','de')   ->   LINGUAS="de"
make.del('LINGUAS')  	   ->   -
with open('/etc/make.conf', 'wb') as configfile:
    make.write(configfile)


nejsem si jistej tim appendem a dropem. mozna by stacilo mit jen merge a drop
a pokud by nejaka promenna obsahovala prilis mnoho sracek, tak by se to zalomilo
na dva radky na nejake mezere.


dale: dival jsem se ze na ini/cfg soubory je parser,nenasel jsem ale na apache. nevis o necem?




Traceback (most recent call last):
  File "./kernel.py", line 20, in <module>
  from hwdetect import *;
  File "/home/killua/opensource/mage/ff/mage/hwdetect.py", line 51, in <module>
  hw['block']['t10/t13'] = int(read_cmd_stdout("for d in `ls /dev/sd* | sed '/.[0-9]/d'`; do hdparm -I ${d} | grep -e T13 -e T10; done | wc -l"))
  ValueError: invalid literal for int() with base 10: 'HDIO_DRIVE_CMD(identify) failed: Invalid exchange\n1'


duvod: /dev/sdb je flashka ktera pri hdparm nenahlasi nic. viz:


vrrr mage # for d in `ls /dev/sd* | sed '/.[0-9]/d'`; do hdparm -I ${d} | grep -e T13 -e T10; done | wc -l
HDIO_DRIVE_CMD(identify) failed: Invalid exchange
1

vrrr mage # for d in `ls /dev/sd* | sed '/.[0-9]/d'`; do hdparm -I ${d} ; done;

/dev/sda:
  
  ATA device, with non-removable media
  Model Number:       SAMSUNG SSD PB22-JS3 TM 128GB
  Serial Number:      YCBH90S930SY930C6840
  Firmware Revision:  VBM19D1Q
  Standards:
    Used: ATA/ATAPI-7 T13 1532D revision 1
    Supported: 7 6 5 4
    Configuration:
      Logical		max	current
      cylinders	16383	16383
      heads		16	16
      sectors/track	63	63
      --
      CHS current addressable sectors:   16514064
      LBA    user addressable sectors:  250069680
      LBA48  user addressable sectors:  250069680
      Logical/Physical Sector size:           512 bytes
      device size with M = 1024*1024:      122104 MBytes
      device size with M = 1000*1000:      128035 MBytes (128 GB)
      cache/buffer size  = unknown
      Nominal Media Rotation Rate: Solid State Device
      Capabilities:
	LBA, IORDY(can be disabled)
	Queue depth: 32
	Standby timer values: spec'd by Standard, no device specific minimum
	R/W multiple sector transfer: Max = 16	Current = 16
	Recommended acoustic management value: 128, current value: 254
	DMA: mdma0 mdma1 mdma2 udma0 udma1 udma2 udma3 udma4 *udma5
	Cycle time: min=120ns recommended=120ns
	PIO: pio0 pio1 pio2 pio3 pio4
	Cycle time: no flow control=120ns  IORDY flow control=120ns
	Commands/features:
	  Enabled	Supported:
	    *	SMART feature set
	    Security Mode feature set
	    *	Power Management feature set
	    Write cache
	    *	Look-ahead
	    *	Host Protected Area feature set
	    *	WRITE_BUFFER command
	    *	READ_BUFFER command
	    *	NOP cmd
	    *	DOWNLOAD_MICROCODE
	    SET_MAX security extension
	    *	Automatic Acoustic Management feature set
	    *	48-bit Address feature set
	    *	Device Configuration Overlay feature set
	    *	Mandatory FLUSH_CACHE
	    *	FLUSH_CACHE_EXT
	    *	SMART error logging
	    *	SMART self-test
	    *	General Purpose Logging feature set
	    *	WRITE_{DMA|MULTIPLE}_FUA_EXT
	    *	64-bit World wide name
	    *	WRITE_UNCORRECTABLE_EXT command
	    *	Segmented DOWNLOAD_MICROCODE
	    *	Gen1 signaling speed (1.5Gb/s)
	    *	Gen2 signaling speed (3.0Gb/s)
	    *	Native Command Queueing (NCQ)
	    *	Host-initiated interface power management
	    *	Phy event counters
	    *	DMA Setup Auto-Activate optimization
	    Device-initiated interface power management
	    *	Software settings preservation
	    Security:
	      Master password revision code = 65534
	      supported
	      not	enabled
	      not	locked
	      frozen
	      not	expired: security count
	      supported: enhanced erase
	      6min for SECURITY ERASE UNIT. 6min for ENHANCED SECURITY ERASE UNIT.
	      Logical Unit WWN Device Identifier: 50000f0056424431
	      NAA		: 5
	      IEEE OUI	: 0000f0
	      Unique ID	: 056424431
	      Checksum: correct
	      
	      /dev/sdb:
		HDIO_DRIVE_CMD(identify) failed: Invalid exchange

